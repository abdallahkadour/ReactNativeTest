buildscript {
    ext {
        // --- Core Android Build Configuration (RN 0.82.1 Compatible) ---
        buildToolsVersion = "34.0.0"
        minSdkVersion = 24
        compileSdkVersion = 34
        targetSdkVersion = 34
        ndkVersion = "27.1.12297006"
        
        // Ensure you are using a modern, compatible AGP version
        // 8.4.1 works well with modern RN and API 36
        agpVersion = "8.4.1" 
        
        // FIX: Using stable, modern Kotlin version (1.9.24) 
        kotlinVersion = "1.9.0"
    }
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        // --- CRITICAL FIX: Now explicitly using the defined versions ---
        
        // 1. Android Gradle Plugin (AGP) - Must have a version
        classpath("com.android.tools.build:gradle:$agpVersion")
        
        // 2. The new React Native Gradle Plugin 
        classpath("com.facebook.react:react-native-gradle-plugin")
        
        // 3. Kotlin Gradle Plugin - Must use the defined version
        classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion")
    }
}

apply plugin: "com.facebook.react.rootproject"

// --- CRITICAL FIX: Configure repositories for all subprojects ---
// This is essential for React Native CI builds to locate dependencies 
// inside the node_modules folder.
allprojects {
    repositories {
        maven {
            // All of React Native (JS bundle, Android platforms, etc) is installed from npm package.
            url("$rootDir/../node_modules/react-native/android")
        }
        maven {
            // Android JSC is installed from npm package.
            url("$rootDir/../node_modules/jsc-android/dist")
        }
        google()
        mavenCentral()
        maven { url 'https://www.jitpack.io' }
    }
}